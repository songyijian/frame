<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>12.watch观察属性</title>
</head>

<body>


    <h1> watch 观察->属性,监听（data，props）变化。发生变化被调用 </h1>
    <div id="box">
        <h3> 观察的属性，接受两个参数( 新,老值) deep深度观察（对象属性发生变化依然会被检测到）

            <pre> handler(val, oldval) {
                        console.log(val, oldval)
                    },
                    deep: true
            </pre>
        </h3>

        <input type="button" @click="addm" value="+=100">
        <p>
            金额 <br> 中国：{{money}}¥
            <br> USA：{{usa}}$
            <br> japan：{{japan}}日元
        </p>
        <div>
            name: <input type="text" v-model:value="mr.name"><br> sex:
            <input type="text" v-model:value="mr.sex">
        </div>
    </div>


    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        new Vue({
            el: "#box",
            data: {
                money: 200,
                usa: 0,
                japan: 0,
                mr: {
                    name: "小强",
                    sex: "男"
                }
            },
            methods: {
                addm() {
                    this.money += 100;
                },
                mrfn() {
                    this.mr.name += '0'
                }
            },
            //观察->属性
            watch: {
                mr: {
                    handler(val, oldval) {
                        console.log(val, oldval)
                    },
                    deep: true
                },
                vs(val, oldVal) {
                    console.log(val, oldVal);
                },

                money(val, oldVal) { //被观察的属性

                    //接收两个参数新值和老值 val, oldVal
                    console.log(val, oldVal);

                    //第一次并不会被执行，只有被修改时才会被调用
                    this.usa = this.money * (1 / 6.5);
                    this.japan = this.money * 16.75
                },
            }
        })
    </script>

</body>

</html>